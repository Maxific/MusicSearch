{"ast":null,"code":"import _objectSpread from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import Header from'../components/Header';import Loading from'./Loading';import searchAlbumsAPI from'../services/searchAlbumsAPI';import ListAlbums from'../components/ListAlbums';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=/*#__PURE__*/function(_React$Component){_inherits(Search,_React$Component);var _super=_createSuper(Search);function Search(){var _this;_classCallCheck(this,Search);_this=_super.call(this);_this.inputArtist=function(e){var tamanho=e.target.value.length;if(tamanho>=2){_this.setState({buttonDisabled:false,artistInput:e.target.value});}else{_this.setState({buttonDisabled:true,artistInput:e.target.value});}};_this.fetchArtist=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var artistInput,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:artistInput=_this.state.artistInput;_this.setState({loading:true,clear:true});_context.next=4;return searchAlbumsAPI(artistInput);case 4:response=_context.sent;_this.setState({loading:false,response:response});case 6:case\"end\":return _context.stop();}}},_callee);}));_this.state={buttonDisabled:true,artistInput:'',loading:false,clear:false,response:[]};return _this;}_createClass(Search,[{key:\"render\",value:function render(){var _this$state=this.state,buttonDisabled=_this$state.buttonDisabled,artistInput=_this$state.artistInput,loading=_this$state.loading,response=_this$state.response;return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"page-search\",className:\"divSearch\",children:[/*#__PURE__*/_jsx(Header,{}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041D\\u0430\\u0439\\u0442\\u0438 \\u0438\\u0441\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044F:\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"artist\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",\"data-testid\":\"search-artist-input\"// value={ clear ? '' : artistInput }\n,value:artistInput,onChange:this.inputArtist})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",\"data-testid\":\"search-artist-button\",disabled:buttonDisabled,onClick:this.fetchArtist,className:\"searchButton\",children:\"\\u041F\\u043E\\u0438\\u0441\\u043A\"})]}),response.length>0&&artistInput!==''?/*#__PURE__*/_jsx(ListAlbums,_objectSpread({},this.state)):/*#__PURE__*/_jsx(\"p\",{children:\"\\u0410\\u043B\\u044C\\u0431\\u043E\\u043C\\u044B \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"})]});}}]);return Search;}(React.Component);export default Search;","map":{"version":3,"names":["React","Header","Loading","searchAlbumsAPI","ListAlbums","Search","inputArtist","e","tamanho","target","value","length","setState","buttonDisabled","artistInput","fetchArtist","state","loading","clear","response","Component"],"sources":["C:/Сайты/react/music-project/src/pages/Search.js"],"sourcesContent":["import React from 'react';\nimport Header from '../components/Header';\nimport Loading from './Loading';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport ListAlbums from '../components/ListAlbums';\n\nclass Search extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      buttonDisabled: true,\n      artistInput: '',\n      loading: false,\n      clear: false,\n      response: [],\n    };\n  }\n\n  inputArtist = (e) => {\n    const tamanho = e.target.value.length;\n\n    if (tamanho >= 2) {\n      this.setState({\n        buttonDisabled: false,\n        artistInput: e.target.value,\n      });\n    } else {\n      this.setState({\n        buttonDisabled: true,\n        artistInput: e.target.value,\n      });\n    }\n  }\n\n  fetchArtist = async () => {\n    const { artistInput } = this.state;\n    this.setState({ loading: true, clear: true });\n    const response = await searchAlbumsAPI(artistInput);\n    this.setState({ loading: false, response });\n  }\n\n  render() {\n    const { buttonDisabled, artistInput, loading, response } = this.state;\n    return (\n      <div data-testid=\"page-search\" className=\"divSearch\">\n        <Header />\n        {loading ? <Loading />\n          : (\n            <form>\n              <h1>Найти исполнителя:</h1>\n              <label htmlFor=\"artist\">\n                <input\n                  type=\"text\"\n                  data-testid=\"search-artist-input\"\n                  // value={ clear ? '' : artistInput }\n                  value={ artistInput }\n                  onChange={ this.inputArtist }\n                />\n              </label>\n              <button\n                type=\"submit\"\n                data-testid=\"search-artist-button\"\n                disabled={ buttonDisabled }\n                onClick={ this.fetchArtist }\n                className=\"searchButton\"\n              >\n                Поиск\n              </button>\n            </form>\n          )}\n        {(response.length > 0 && artistInput !== '')\n          ? <ListAlbums { ...this.state } />\n          : <p>Альбомы не найдены</p>}\n      </div>\n    );\n  }\n}\n\nexport default Search;\n"],"mappings":"48BAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAOC,OAAM,KAAM,sBAAsB,CACzC,MAAOC,QAAO,KAAM,WAAW,CAC/B,MAAOC,gBAAe,KAAM,6BAA6B,CACzD,MAAOC,WAAU,KAAM,0BAA0B,CAAC,2FAE5CC,OAAM,4GACV,iBAAc,wCACZ,wBAAQ,MAWVC,WAAW,CAAG,SAACC,CAAC,CAAK,CACnB,GAAMC,QAAO,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAACC,MAAM,CAErC,GAAIH,OAAO,EAAI,CAAC,CAAE,CAChB,MAAKI,QAAQ,CAAC,CACZC,cAAc,CAAE,KAAK,CACrBC,WAAW,CAAEP,CAAC,CAACE,MAAM,CAACC,KACxB,CAAC,CAAC,CACJ,CAAC,IAAM,CACL,MAAKE,QAAQ,CAAC,CACZC,cAAc,CAAE,IAAI,CACpBC,WAAW,CAAEP,CAAC,CAACE,MAAM,CAACC,KACxB,CAAC,CAAC,CACJ,CACF,CAAC,OAEDK,WAAW,wEAAG,8JACJD,WAAW,CAAK,MAAKE,KAAK,CAA1BF,WAAW,CACnB,MAAKF,QAAQ,CAAC,CAAEK,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,IAAK,CAAC,CAAC,CAAC,sBACvBf,gBAAe,CAACW,WAAW,CAAC,QAA7CK,QAAQ,eACd,MAAKP,QAAQ,CAAC,CAAEK,OAAO,CAAE,KAAK,CAAEE,QAAQ,CAARA,QAAS,CAAC,CAAC,CAAC,sDAC7C,GA9BC,MAAKH,KAAK,CAAG,CACXH,cAAc,CAAE,IAAI,CACpBC,WAAW,CAAE,EAAE,CACfG,OAAO,CAAE,KAAK,CACdC,KAAK,CAAE,KAAK,CACZC,QAAQ,CAAE,EACZ,CAAC,CAAC,aACJ,CAAC,yCAyBD,iBAAS,CACP,gBAA2D,IAAI,CAACH,KAAK,CAA7DH,cAAc,aAAdA,cAAc,CAAEC,WAAW,aAAXA,WAAW,CAAEG,OAAO,aAAPA,OAAO,CAAEE,QAAQ,aAARA,QAAQ,CACtD,mBACE,aAAK,cAAY,aAAa,CAAC,SAAS,CAAC,WAAW,wBAClD,KAAC,MAAM,IAAG,CACTF,OAAO,cAAG,KAAC,OAAO,IAAG,cAElB,qCACE,0HAA2B,cAC3B,cAAO,OAAO,CAAC,QAAQ,uBACrB,cACE,IAAI,CAAC,MAAM,CACX,cAAY,qBACZ;AAAA,CACA,KAAK,CAAGH,WAAa,CACrB,QAAQ,CAAG,IAAI,CAACR,WAAa,EAC7B,EACI,cACR,eACE,IAAI,CAAC,QAAQ,CACb,cAAY,sBAAsB,CAClC,QAAQ,CAAGO,cAAgB,CAC3B,OAAO,CAAG,IAAI,CAACE,WAAa,CAC5B,SAAS,CAAC,cAAc,4CAGjB,GAEZ,CACDI,QAAQ,CAACR,MAAM,CAAG,CAAC,EAAIG,WAAW,GAAK,EAAE,cACvC,KAAC,UAAU,kBAAM,IAAI,CAACE,KAAK,EAAK,cAChC,yHAAyB,GACzB,CAEV,CAAC,oBAtEkBhB,KAAK,CAACoB,SAAS,EAyEpC,cAAef,OAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}