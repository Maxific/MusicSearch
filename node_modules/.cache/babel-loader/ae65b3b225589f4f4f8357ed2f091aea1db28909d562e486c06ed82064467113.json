{"ast":null,"code":"var _jsxFileName = \"C:\\\\\\u0421\\u0430\\u0439\\u0442\\u044B\\\\react\\\\music-project\\\\src\\\\components\\\\MusicCard.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../pages/Loading';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass MusicCard extends React.Component {\n  constructor() {\n    super();\n    this.addFav = async () => {\n      const {\n        song\n      } = this.props;\n      this.setState({\n        loading: true\n      });\n      await addSong(song);\n      this.setState({\n        loading: false\n      });\n    };\n    this.removeFav = async () => {\n      const {\n        song\n      } = this.props;\n      this.setState({\n        loading: true\n      });\n      await removeSong(song);\n      this.setState({\n        loading: false\n      });\n    };\n    this.handleFavs = _ref => {\n      let {\n        target\n      } = _ref;\n      if (target.checked) {\n        this.setState({\n          checked: target.checked\n        }, this.addFav);\n      } else {\n        this.setState({\n          checked: target.checked\n        }, this.removeFav);\n      }\n    };\n    this.returnFavs = async () => {\n      const {\n        song\n      } = this.props;\n      const favs = await getFavoriteSongs();\n      const favsSongs = favs.some(msc => msc.trackId === song.trackId);\n      this.setState({\n        checked: favsSongs\n      });\n    };\n    this.state = {\n      loading: false,\n      checked: false\n    };\n  }\n  componentDidMount() {\n    this.returnFavs();\n  }\n  render() {\n    const {\n      song\n    } = this.props;\n    const {\n      trackName,\n      previewUrl,\n      trackId\n    } = song;\n    const {\n      loading,\n      checked\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fav\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: trackName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n          \"data-testid\": \"audio-component\",\n          src: previewUrl,\n          controls: true,\n          children: [/*#__PURE__*/_jsxDEV(\"track\", {\n            kind: \"captions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this), \"\\u0412\\u0430\\u0448 \\u0431\\u0440\\u0430\\u0443\\u0437\\u0435\\u0440 \\u043D\\u0435 \\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442 \\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\", ' ', /*#__PURE__*/_jsxDEV(\"code\", {\n            children: \"\\u0410\\u0443\\u0434\\u0438\\u043E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"favorite\",\n          className: \"labelFav\",\n          children: [\"\\u0418\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0435\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: \"favorite\",\n            \"data-testid\": `checkbox-music-${trackId}`,\n            onChange: this.handleFavs,\n            name: \"favorite\",\n            checked: checked\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this);\n  }\n}\nMusicCard.propTypes = {\n  song: PropTypes.arrayOf(PropTypes.string).isRequired\n};\nexport default MusicCard;","map":{"version":3,"names":["React","PropTypes","Loading","addSong","getFavoriteSongs","removeSong","MusicCard","Component","constructor","addFav","song","props","setState","loading","removeFav","handleFavs","target","checked","returnFavs","favs","favsSongs","some","msc","trackId","state","componentDidMount","render","trackName","previewUrl","propTypes","arrayOf","string","isRequired"],"sources":["C:/Сайты/react/music-project/src/components/MusicCard.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../pages/Loading';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\n\nclass MusicCard extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      loading: false,\n      checked: false,\n    };\n  }\n\n  componentDidMount() {\n    this.returnFavs();\n  }\n\n  addFav = async () => {\n    const { song } = this.props;\n    this.setState({ loading: true });\n    await addSong(song);\n    this.setState({ loading: false });\n  }\n\n  removeFav = async () => {\n    const { song } = this.props;\n    this.setState({ loading: true });\n    await removeSong(song);\n    this.setState({ loading: false });\n  }\n\n  handleFavs = ({ target }) => {\n    if (target.checked) {\n      this.setState({ checked: target.checked }, this.addFav);\n    } else {\n      this.setState({ checked: target.checked }, this.removeFav);\n    }\n  }\n\n  returnFavs = async () => {\n    const { song } = this.props;\n    const favs = await getFavoriteSongs();\n    const favsSongs = favs.some((msc) => msc.trackId === song.trackId);\n    this.setState({ checked: favsSongs });\n  }\n\n  render() {\n    const { song } = this.props;\n    const { trackName, previewUrl, trackId } = song;\n    const { loading, checked } = this.state;\n    return (\n      <div>\n        {loading && <Loading /> }\n        <div className=\"fav\">\n          <h4>{ trackName }</h4>\n          <audio data-testid=\"audio-component\" src={ previewUrl } controls>\n            <track kind=\"captions\" />\n            Ваш браузер не поддерживает элемент\n            {' '}\n            <code>Аудио</code>\n          </audio>\n          <label htmlFor=\"favorite\" className=\"labelFav\">\n            Избранное\n            <input\n              type=\"checkbox\"\n              id=\"favorite\"\n              data-testid={ `checkbox-music-${trackId}` }\n              onChange={ this.handleFavs }\n              name=\"favorite\"\n              checked={ checked }\n            />\n          </label>\n        </div>\n      </div>\n    );\n  }\n}\n\nMusicCard.propTypes = {\n  song: PropTypes.arrayOf(PropTypes.string).isRequired,\n};\n\nexport default MusicCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}