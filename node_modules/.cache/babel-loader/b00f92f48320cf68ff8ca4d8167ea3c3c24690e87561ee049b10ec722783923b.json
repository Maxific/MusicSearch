{"ast":null,"code":"import _regeneratorRuntime from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Redirect}from'react-router-dom';import{createUser}from'../services/userAPI';import Loading from'./Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.verify=function(e){var size=e.target.value.length;var max=3;if(size>=max){_this.setState({buttonDisabled:false,input:e.target.value});}else{_this.setState({buttonDisabled:true,input:e.target.value});}};_this.submit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var input;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:input=_this.state.input;_this.setState({loading:true});_context.next=4;return createUser({name:input});case 4:_this.setState({loading:false,redirect:true});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.state={buttonDisabled:true,input:'',loading:false,redirect:false};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this$state=this.state,buttonDisabled=_this$state.buttonDisabled,loading=_this$state.loading,redirect=_this$state.redirect;return/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"page-login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"divLogin\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u043C\\u0435\\u043B\\u043E\\u0434\\u0438\\u0438!\"}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"name\",className:\"nameLabel\",children:[\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",\"data-testid\":\"login-name-input\",onChange:this.verify})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",\"data-testid\":\"login-submit-button\",disabled:buttonDisabled,onClick:this.submit,className:\"submitLogin\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"footer\",{children:\"\\u0420\\u0430\\u0437\\u0440\\u0430\\u0431\\u043E\\u0442\\u0447\\u0438\\u043A \\u0424\\u0438\\u0446\\u0435\\u0432 \\u041C\\u0430\\u043A\\u0441\\u0438\\u043C, 2022 \\u0433.\"})}),redirect&&/*#__PURE__*/_jsx(Redirect,{to:\"/search\"})]})});}}]);return Login;}(React.Component);export default Login;// import { useState } from \"react\";\n// import {\n//   createUserWithEmailAndPassword,\n//   signInWithEmailAndPassword,\n//   onAuthStateChanged,\n//   signOut,\n// } from \"firebase/auth\";\n// import { auth } from \"../firebase-config\";\n// import { Link } from \"react-router-dom\";\n// function Login() {\n//   const [registerEmail, setRegisterEmail] = useState(\"\");\n//   const [registerPassword, setRegisterPassword] = useState(\"\");\n//   const [loginEmail, setLoginEmail] = useState(\"\");\n//   const [loginPassword, setLoginPassword] = useState(\"\");\n//   const [user, setUser] = useState({});\n//   onAuthStateChanged(auth, (currentUser) => {\n//     setUser(currentUser);\n//   });\n//   const register = async () => {\n//     try {\n//       const user = await createUserWithEmailAndPassword(\n//         auth,\n//         registerEmail,\n//         registerPassword\n//       );\n//       console.log(user);\n//     } catch (error) {\n//       console.log(error.message);\n//     }\n//   };\n//   const login = async () => {\n//     try {\n//       const user = await signInWithEmailAndPassword(\n//         auth,\n//         loginEmail,\n//         loginPassword\n//       );\n//       console.log(user);\n//     } catch (error) {\n//       console.log(error.message);\n//     }\n//   };\n//   const logout = async () => {\n//     await signOut(auth);\n//   };\n//   return (\n//     <div className=\"App\">\n//       <div>\n//         <h3> Register User </h3>\n//         <input\n//           placeholder=\"Email...\"\n//           onChange={(event) => {\n//             setRegisterEmail(event.target.value);\n//           }}\n//         />\n//         <input\n//           placeholder=\"Password...\"\n//           onChange={(event) => {\n//             setRegisterPassword(event.target.value);\n//           }}\n//         />\n//         <button onClick={register}> Create User</button>\n//       </div>\n//       <div>\n//         <h3> Login </h3>\n//         <input\n//           placeholder=\"Email...\"\n//           onChange={(event) => {\n//             setLoginEmail(event.target.value);\n//           }}\n//         />\n//         <input\n//           placeholder=\"Password...\"\n//           onChange={(event) => {\n//             setLoginPassword(event.target.value);\n//           }}\n//         />\n//       <Link to=\"/search\" data-testid=\"link-to-search\"> <button onClick={login}> Login</button></Link>\n//       </div>\n//       <h4> User Logged In: </h4>\n//       {user?.email}\n//       <button onClick={logout}> Sign Out </button>\n//     </div>\n//   );\n// }\n// export default Login;","map":{"version":3,"names":["React","Redirect","createUser","Loading","Login","verify","e","size","target","value","length","max","setState","buttonDisabled","input","submit","state","loading","name","redirect","Component"],"sources":["C:/Сайты/react/music-project/src/pages/Login.js"],"sourcesContent":["\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { createUser } from '../services/userAPI';\nimport Loading from './Loading';\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      buttonDisabled: true,\n      input: '',\n      loading: false,\n      redirect: false,\n    };\n  }\n\n  verify = (e) => {\n    const size = e.target.value.length;\n    const max = 3;\n\n    if (size >= max) {\n      this.setState({\n        buttonDisabled: false,\n        input: e.target.value,\n      });\n    } else {\n      this.setState({\n        buttonDisabled: true,\n        input: e.target.value,\n      });\n    }\n  }\n\n  submit = async () => {\n    const { input } = this.state;\n    this.setState({ loading: true });\n    await createUser({ name: input });\n    this.setState({ loading: false, redirect: true });\n  }\n\n  render() {\n    const { buttonDisabled, loading, redirect } = this.state;\n    return (\n      <div data-testid=\"page-login\">\n        <div className=\"divLogin\">\n          <h1>Попробуйте мелодии!</h1>\n          {loading ? <Loading />\n            : (\n              <form>\n                <label htmlFor=\"name\" className=\"nameLabel\">\n                Введите ваше имя:\n                  <input\n                    type=\"text\"\n                    data-testid=\"login-name-input\"\n                    onChange={ this.verify }\n                  />\n                </label>\n                <button\n                  type=\"submit\"\n                  data-testid=\"login-submit-button\"\n                  disabled={ buttonDisabled }\n                  onClick={ this.submit }\n                  className=\"submitLogin\"\n                >\n                  Войти\n                </button>\n              </form>\n            )}\n          <div>\n            <footer>Разработчик Фицев Максим, 2022 г.</footer>\n          </div>\n          { redirect && <Redirect to=\"/search\" /> }\n        </div>\n      </div>\n    );\n  }\n}\nexport default Login;\n\n// import { useState } from \"react\";\n// import {\n//   createUserWithEmailAndPassword,\n//   signInWithEmailAndPassword,\n//   onAuthStateChanged,\n//   signOut,\n// } from \"firebase/auth\";\n\n// import { auth } from \"../firebase-config\";\n// import { Link } from \"react-router-dom\";\n\n// function Login() {\n//   const [registerEmail, setRegisterEmail] = useState(\"\");\n//   const [registerPassword, setRegisterPassword] = useState(\"\");\n//   const [loginEmail, setLoginEmail] = useState(\"\");\n//   const [loginPassword, setLoginPassword] = useState(\"\");\n\n//   const [user, setUser] = useState({});\n\n//   onAuthStateChanged(auth, (currentUser) => {\n//     setUser(currentUser);\n//   });\n\n//   const register = async () => {\n//     try {\n//       const user = await createUserWithEmailAndPassword(\n//         auth,\n//         registerEmail,\n//         registerPassword\n//       );\n//       console.log(user);\n//     } catch (error) {\n//       console.log(error.message);\n//     }\n//   };\n\n//   const login = async () => {\n//     try {\n//       const user = await signInWithEmailAndPassword(\n//         auth,\n//         loginEmail,\n//         loginPassword\n//       );\n//       console.log(user);\n//     } catch (error) {\n//       console.log(error.message);\n//     }\n//   };\n\n//   const logout = async () => {\n//     await signOut(auth);\n//   };\n\n//   return (\n//     <div className=\"App\">\n//       <div>\n//         <h3> Register User </h3>\n//         <input\n//           placeholder=\"Email...\"\n//           onChange={(event) => {\n//             setRegisterEmail(event.target.value);\n//           }}\n//         />\n//         <input\n//           placeholder=\"Password...\"\n//           onChange={(event) => {\n//             setRegisterPassword(event.target.value);\n//           }}\n//         />\n\n//         <button onClick={register}> Create User</button>\n//       </div>\n\n//       <div>\n//         <h3> Login </h3>\n//         <input\n//           placeholder=\"Email...\"\n//           onChange={(event) => {\n//             setLoginEmail(event.target.value);\n//           }}\n//         />\n//         <input\n//           placeholder=\"Password...\"\n//           onChange={(event) => {\n//             setLoginPassword(event.target.value);\n//           }}\n//         />\n\n//       <Link to=\"/search\" data-testid=\"link-to-search\"> <button onClick={login}> Login</button></Link>\n//       </div>\n\n//       <h4> User Logged In: </h4>\n//       {user?.email}\n\n//       <button onClick={logout}> Sign Out </button>\n//     </div>\n//   );\n// }\n\n// export default Login;"],"mappings":"k0BACA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,UAAU,KAAQ,qBAAqB,CAChD,MAAOC,QAAO,KAAM,WAAW,CAAC,2FAE1BC,MAAK,0GACT,gBAAc,uCACZ,wBAAQ,MAUVC,MAAM,CAAG,SAACC,CAAC,CAAK,CACd,GAAMC,KAAI,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAACC,MAAM,CAClC,GAAMC,IAAG,CAAG,CAAC,CAEb,GAAIJ,IAAI,EAAII,GAAG,CAAE,CACf,MAAKC,QAAQ,CAAC,CACZC,cAAc,CAAE,KAAK,CACrBC,KAAK,CAAER,CAAC,CAACE,MAAM,CAACC,KAClB,CAAC,CAAC,CACJ,CAAC,IAAM,CACL,MAAKG,QAAQ,CAAC,CACZC,cAAc,CAAE,IAAI,CACpBC,KAAK,CAAER,CAAC,CAACE,MAAM,CAACC,KAClB,CAAC,CAAC,CACJ,CACF,CAAC,OAEDM,MAAM,wEAAG,+IACCD,KAAK,CAAK,MAAKE,KAAK,CAApBF,KAAK,CACb,MAAKF,QAAQ,CAAC,CAAEK,OAAO,CAAE,IAAK,CAAC,CAAC,CAAC,sBAC3Bf,WAAU,CAAC,CAAEgB,IAAI,CAAEJ,KAAM,CAAC,CAAC,QACjC,MAAKF,QAAQ,CAAC,CAAEK,OAAO,CAAE,KAAK,CAAEE,QAAQ,CAAE,IAAK,CAAC,CAAC,CAAC,sDACnD,GA9BC,MAAKH,KAAK,CAAG,CACXH,cAAc,CAAE,IAAI,CACpBC,KAAK,CAAE,EAAE,CACTG,OAAO,CAAE,KAAK,CACdE,QAAQ,CAAE,KACZ,CAAC,CAAC,aACJ,CAAC,wCA0BD,iBAAS,CACP,gBAA8C,IAAI,CAACH,KAAK,CAAhDH,cAAc,aAAdA,cAAc,CAAEI,OAAO,aAAPA,OAAO,CAAEE,QAAQ,aAARA,QAAQ,CACzC,mBACE,YAAK,cAAY,YAAY,uBAC3B,aAAK,SAAS,CAAC,UAAU,wBACvB,gIAA4B,CAC3BF,OAAO,cAAG,KAAC,OAAO,IAAG,cAElB,qCACE,eAAO,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,kHAEzC,cACE,IAAI,CAAC,MAAM,CACX,cAAY,kBAAkB,CAC9B,QAAQ,CAAG,IAAI,CAACZ,MAAQ,EACxB,GACI,cACR,eACE,IAAI,CAAC,QAAQ,CACb,cAAY,qBAAqB,CACjC,QAAQ,CAAGQ,cAAgB,CAC3B,OAAO,CAAG,IAAI,CAACE,MAAQ,CACvB,SAAS,CAAC,aAAa,4CAGhB,GAEZ,cACH,kCACE,gLAAkD,EAC9C,CACJI,QAAQ,eAAI,KAAC,QAAQ,EAAC,EAAE,CAAC,SAAS,EAAG,GACnC,EACF,CAEV,CAAC,mBAvEiBnB,KAAK,CAACoB,SAAS,EAyEnC,cAAehB,MAAK,CAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}