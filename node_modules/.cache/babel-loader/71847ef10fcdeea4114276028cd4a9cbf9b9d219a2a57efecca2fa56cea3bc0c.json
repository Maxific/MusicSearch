{"ast":null,"code":"import _defineProperty from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import Header from'../components/Header';import{getUser,updateUser}from'../services/userAPI';import Loading from'./Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileEdit=/*#__PURE__*/function(_React$Component){_inherits(ProfileEdit,_React$Component);var _super=_createSuper(ProfileEdit);function ProfileEdit(){var _this;_classCallCheck(this,ProfileEdit);_this=_super.call(this);_this.returnUser=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userInfo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({loading:true});_context.next=3;return getUser();case 3:userInfo=_context.sent;_this.setState({loading:false,inputName:userInfo.name,inputEmail:userInfo.email,inputInfo:userInfo.description,inputPic:userInfo.image},_this.submitButton);case 5:case\"end\":return _context.stop();}}},_callee);}));_this.handleChange=function(_ref2){var target=_ref2.target;var name=target.name;var value=target.value;_this.setState(_defineProperty({},name,value),_this.submitButton);};_this.submitButton=function(){var _this$state=_this.state,inputName=_this$state.inputName,inputEmail=_this$state.inputEmail,inputInfo=_this$state.inputInfo,inputPic=_this$state.inputPic;if(inputName!==''&&inputEmail!==''&&inputInfo!==''&&inputPic!==''){_this.setState({disabled:false});}};_this.updateInfo=function(e){e.preventDefault();_this.setState({loading:true});var _this$state2=_this.state,inputName=_this$state2.inputName,inputEmail=_this$state2.inputEmail,inputInfo=_this$state2.inputInfo,inputPic=_this$state2.inputPic;var history=_this.props.history;var user={name:inputName,image:inputPic,email:inputEmail,description:inputInfo};updateUser(user);_this.setState({loading:false});history.push('/profile');};_this.state={loading:false,disabled:true,inputName:'',inputEmail:'',inputInfo:'',inputPic:''};return _this;}_createClass(ProfileEdit,[{key:\"componentDidMount\",value:function componentDidMount(){this.returnUser();}},{key:\"render\",value:function render(){var _this$state3=this.state,loading=_this$state3.loading,disabled=_this$state3.disabled;var _this$state4=this.state,inputName=_this$state4.inputName,inputEmail=_this$state4.inputEmail,inputInfo=_this$state4.inputInfo,inputPic=_this$state4.inputPic;return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"page-profile-edit\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"editProfile\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"}),loading&&/*#__PURE__*/_jsx(Loading,{}),/*#__PURE__*/_jsxs(\"form\",{className:\"formEdit\",children:[/*#__PURE__*/_jsx(\"img\",{src:inputPic,alt:inputName,className:\"imgProfile2\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"changeName\",children:[\"\\u0418\\u043C\\u044F\",/*#__PURE__*/_jsx(\"input\",{name:\"inputName\",type:\"text\",value:inputName,onChange:this.handleChange,id:\"changeName\",\"data-testid\":\"edit-input-name\"})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"changeEmail\",children:[\"Email:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"inputEmail\",value:inputEmail,id:\"changeEmail\",onChange:this.handleChange,\"data-testid\":\"edit-input-email\"})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"changeInfo\",children:[\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"inputInfo\",value:inputInfo,onChange:this.handleChange,id:\"changeInfo\",\"data-testid\":\"edit-input-description\"})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"changePic\",children:[\"\\u0424\\u043E\\u0442\\u043E\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"inputPic\",value:inputPic,onChange:this.handleChange,id:\"changePic\",\"data-testid\":\"edit-input-image\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"divButton\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",\"data-testid\":\"edit-button-save\",disabled:disabled,onClick:this.updateInfo,className:\"updateButton\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})]})]})]});}}]);return ProfileEdit;}(React.Component);export default ProfileEdit;","map":{"version":3,"names":["React","Header","getUser","updateUser","Loading","ProfileEdit","returnUser","setState","loading","userInfo","inputName","name","inputEmail","email","inputInfo","description","inputPic","image","submitButton","handleChange","target","value","state","disabled","updateInfo","e","preventDefault","history","props","user","push","Component"],"sources":["C:/Сайты/react/music-project/src/pages/ProfileEdit.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport { getUser, updateUser } from '../services/userAPI';\nimport Loading from './Loading';\n\nclass ProfileEdit extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      loading: false,\n      disabled: true,\n      inputName: '',\n      inputEmail: '',\n      inputInfo: '',\n      inputPic: '',\n    };\n  }\n\n  componentDidMount() {\n    this.returnUser();\n  }\n\n  returnUser = async () => {\n    this.setState({ loading: true });\n    const userInfo = await getUser();\n    this.setState({ loading: false,\n      inputName: userInfo.name,\n      inputEmail: userInfo.email,\n      inputInfo: userInfo.description,\n      inputPic: userInfo.image }, this.submitButton);\n  }\n\n  handleChange = ({ target }) => {\n    const { name } = target;\n    const { value } = target;\n    this.setState({ [name]: value }, this.submitButton);\n  }\n\n  submitButton = () => {\n    const { inputName, inputEmail, inputInfo, inputPic } = this.state;\n    if (inputName !== ''\n    && inputEmail !== ''\n    && inputInfo !== ''\n    && inputPic !== '') {\n      this.setState({ disabled: false });\n    }\n  }\n\n  updateInfo = (e) => {\n    e.preventDefault();\n    this.setState({ loading: true });\n    const { inputName, inputEmail, inputInfo, inputPic } = this.state;\n    const { history } = this.props;\n    const user = { name: inputName,\n      image: inputPic,\n      email: inputEmail,\n      description: inputInfo };\n    updateUser(user);\n    this.setState({ loading: false });\n    history.push('/profile');\n  }\n\n  render() {\n    const { loading, disabled } = this.state;\n    const { inputName, inputEmail, inputInfo, inputPic } = this.state;\n    return (\n      <div data-testid=\"page-profile-edit\">\n        <Header />\n        <div className=\"editProfile\">\n          <h1>Редактировать профиль</h1>\n          {loading && <Loading />}\n          <form className=\"formEdit\">\n            <img src={ inputPic } alt={ inputName } className=\"imgProfile2\" />\n            <label htmlFor=\"changeName\">\n             Имя\n              <input\n                name=\"inputName\"\n                type=\"text\"\n                value={ inputName }\n                onChange={ this.handleChange }\n                id=\"changeName\"\n                data-testid=\"edit-input-name\"\n              />\n            </label>\n            <label htmlFor=\"changeEmail\">\n              Email:\n              <input\n                type=\"text\"\n                name=\"inputEmail\"\n                value={ inputEmail }\n                id=\"changeEmail\"\n                onChange={ this.handleChange }\n                data-testid=\"edit-input-email\"\n              />\n            </label>\n            <label htmlFor=\"changeInfo\">\n              Описание\n              <input\n                type=\"text\"\n                name=\"inputInfo\"\n                value={ inputInfo }\n                onChange={ this.handleChange }\n                id=\"changeInfo\"\n                data-testid=\"edit-input-description\"\n              />\n            </label>\n            <label htmlFor=\"changePic\">\n              Фото\n              <input\n                type=\"text\"\n                name=\"inputPic\"\n                value={ inputPic }\n                onChange={ this.handleChange }\n                id=\"changePic\"\n                data-testid=\"edit-input-image\"\n              />\n            </label>\n            <div className=\"divButton\">\n              <button\n                type=\"submit\"\n                data-testid=\"edit-button-save\"\n                disabled={ disabled }\n                onClick={ this.updateInfo }\n                className=\"updateButton\"\n              >\n                Сохранить\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nProfileEdit.propTypes = {\n  history: PropTypes.string,\n}.isRequired;\n\nexport default ProfileEdit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}