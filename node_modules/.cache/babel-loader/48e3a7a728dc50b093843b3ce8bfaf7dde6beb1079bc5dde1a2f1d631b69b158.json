{"ast":null,"code":"import _regeneratorRuntime from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/\\u0421\\u0430\\u0439\\u0442\\u044B/react/music-project/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import Loading from'../pages/Loading';import{removeSong,addSong}from'../services/favoriteSongsAPI';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FavoriteCards=/*#__PURE__*/function(_React$Component){_inherits(FavoriteCards,_React$Component);var _super=_createSuper(FavoriteCards);function FavoriteCards(){var _this;_classCallCheck(this,FavoriteCards);_this=_super.call(this);_this.removeFav=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var song;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:song=_this.props.song;_this.setState({loading:true});_context.next=4;return removeSong(song);case 4:_this.setState({loading:false});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.returnFavs=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var song;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:song=_this.props.song;_this.setState({loading:true});_context2.next=4;return addSong(song);case 4:_this.setState({loading:false});case 5:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleFavs=function(_ref3){var target=_ref3.target;if(!target.checked){_this.setState({checked:target.checked},_this.removeFav);}else{_this.setState({checked:target.checked},_this.returnFavs);}};_this.state={checked:true,loading:false};return _this;}_createClass(FavoriteCards,[{key:\"render\",value:function render(){var song=this.props.song;var trackName=song.trackName,previewUrl=song.previewUrl,trackId=song.trackId,artistName=song.artistName;var _this$state=this.state,checked=_this$state.checked,loading=_this$state.loading;return/*#__PURE__*/_jsxs(\"div\",{children:[loading&&/*#__PURE__*/_jsx(Loading,{}),checked&&/*#__PURE__*/_jsxs(\"div\",{className:\"songFav\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"songName\",children:trackName}),/*#__PURE__*/_jsx(\"h4\",{children:artistName}),/*#__PURE__*/_jsxs(\"audio\",{\"data-testid\":\"audio-component\",src:previewUrl,controls:true,children:[/*#__PURE__*/_jsx(\"track\",{kind:\"captions\"}),\"\\u0412\\u0430\\u0448 \\u0431\\u0440\\u0430\\u0443\\u0437\\u0435\\u0440 \\u043D\\u0435 \\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0439 \\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\",' ',/*#__PURE__*/_jsx(\"code\",{children:\"\\u0410\\u0443\\u0434\\u0438\\u043E\"})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"favorite\",className:\"checkedFav\",children:[\"\\u0418\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0435\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"favorite\",\"data-testid\":\"checkbox-music-\".concat(trackId),onChange:this.handleFavs,name:\"favorite\",checked:checked})]})]})]});}}]);return FavoriteCards;}(React.Component);export default FavoriteCards;","map":{"version":3,"names":["React","Loading","removeSong","addSong","FavoriteCards","removeFav","song","props","setState","loading","returnFavs","handleFavs","target","checked","state","trackName","previewUrl","trackId","artistName","Component"],"sources":["C:/Сайты/react/music-project/src/components/FavoriteCards.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../pages/Loading';\nimport { removeSong, addSong } from '../services/favoriteSongsAPI';\n\nclass FavoriteCards extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      checked: true,\n      loading: false,\n    };\n  }\n\n  removeFav = async () => {\n    const { song } = this.props;\n    this.setState({ loading: true });\n    await removeSong(song);\n    this.setState({ loading: false });\n  }\n\n  returnFavs = async () => {\n    const { song } = this.props;\n    this.setState({ loading: true });\n    await addSong(song);\n    this.setState({ loading: false });\n  }\n\n  handleFavs = ({ target }) => {\n    if (!target.checked) {\n      this.setState({ checked: target.checked }, this.removeFav);\n    } else {\n      this.setState({ checked: target.checked }, this.returnFavs);\n    }\n  }\n\n  render() {\n    const { song } = this.props;\n    const { trackName, previewUrl, trackId, artistName } = song;\n    const { checked, loading } = this.state;\n    return (\n      <div>\n        {loading && <Loading />}\n        {checked && (\n          <div className=\"songFav\">\n            <h4 className=\"songName\">{ trackName }</h4>\n            <h4>{ artistName }</h4>\n            <audio data-testid=\"audio-component\" src={ previewUrl } controls>\n              <track kind=\"captions\" />\n              Ваш браузер не поддерживает данный элемент\n              {' '}\n              <code>Аудио</code>\n            </audio>\n            <label htmlFor=\"favorite\" className=\"checkedFav\">\n              Избранное\n              <input\n                type=\"checkbox\"\n                id=\"favorite\"\n                data-testid={ `checkbox-music-${trackId}` }\n                onChange={ this.handleFavs }\n                name=\"favorite\"\n                checked={ checked }\n              />\n            </label>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nFavoriteCards.propTypes = {\n  song: PropTypes.array,\n}.isRequired;\n\nexport default FavoriteCards;\n"],"mappings":"k0BAAA,MAAOA,MAAK,KAAM,OAAO,CAEzB,MAAOC,QAAO,KAAM,kBAAkB,CACtC,OAASC,UAAU,CAAEC,OAAO,KAAQ,8BAA8B,CAAC,2FAE7DC,cAAa,0HACjB,wBAAc,+CACZ,wBAAQ,MAQVC,SAAS,wEAAG,8IACFC,IAAI,CAAK,MAAKC,KAAK,CAAnBD,IAAI,CACZ,MAAKE,QAAQ,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAAC,CAAC,sBAC3BP,WAAU,CAACI,IAAI,CAAC,QACtB,MAAKE,QAAQ,CAAC,CAAEC,OAAO,CAAE,KAAM,CAAC,CAAC,CAAC,sDACnC,SAEDC,UAAU,wEAAG,mJACHJ,IAAI,CAAK,MAAKC,KAAK,CAAnBD,IAAI,CACZ,MAAKE,QAAQ,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAAC,CAAC,uBAC3BN,QAAO,CAACG,IAAI,CAAC,QACnB,MAAKE,QAAQ,CAAC,CAAEC,OAAO,CAAE,KAAM,CAAC,CAAC,CAAC,wDACnC,SAEDE,UAAU,CAAG,eAAgB,IAAbC,OAAM,OAANA,MAAM,CACpB,GAAI,CAACA,MAAM,CAACC,OAAO,CAAE,CACnB,MAAKL,QAAQ,CAAC,CAAEK,OAAO,CAAED,MAAM,CAACC,OAAQ,CAAC,CAAE,MAAKR,SAAS,CAAC,CAC5D,CAAC,IAAM,CACL,MAAKG,QAAQ,CAAC,CAAEK,OAAO,CAAED,MAAM,CAACC,OAAQ,CAAC,CAAE,MAAKH,UAAU,CAAC,CAC7D,CACF,CAAC,CA1BC,MAAKI,KAAK,CAAG,CACXD,OAAO,CAAE,IAAI,CACbJ,OAAO,CAAE,KACX,CAAC,CAAC,aACJ,CAAC,gDAwBD,iBAAS,CACP,GAAQH,KAAI,CAAK,IAAI,CAACC,KAAK,CAAnBD,IAAI,CACZ,GAAQS,UAAS,CAAsCT,IAAI,CAAnDS,SAAS,CAAEC,UAAU,CAA0BV,IAAI,CAAxCU,UAAU,CAAEC,OAAO,CAAiBX,IAAI,CAA5BW,OAAO,CAAEC,UAAU,CAAKZ,IAAI,CAAnBY,UAAU,CAClD,gBAA6B,IAAI,CAACJ,KAAK,CAA/BD,OAAO,aAAPA,OAAO,CAAEJ,OAAO,aAAPA,OAAO,CACxB,mBACE,uBACGA,OAAO,eAAI,KAAC,OAAO,IAAG,CACtBI,OAAO,eACN,aAAK,SAAS,CAAC,SAAS,wBACtB,WAAI,SAAS,CAAC,UAAU,UAAGE,SAAS,EAAO,cAC3C,oBAAMG,UAAU,EAAO,cACvB,eAAO,cAAY,iBAAiB,CAAC,GAAG,CAAGF,UAAY,CAAC,QAAQ,6BAC9D,cAAO,IAAI,CAAC,UAAU,EAAG,uOAExB,GAAG,cACJ,wDAAkB,GACZ,cACR,eAAO,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,YAAY,iFAE9C,cACE,IAAI,CAAC,UAAU,CACf,EAAE,CAAC,UAAU,CACb,uCAAgCC,OAAO,CAAI,CAC3C,QAAQ,CAAG,IAAI,CAACN,UAAY,CAC5B,IAAI,CAAC,UAAU,CACf,OAAO,CAAGE,OAAS,EACnB,GACI,GAEX,GACG,CAEV,CAAC,2BAhEyBb,KAAK,CAACmB,SAAS,EAuE3C,cAAef,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}